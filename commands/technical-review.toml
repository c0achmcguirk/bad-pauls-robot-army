description = "Read a document and produce an annotated reviewed copy with section-by-section commentary"
prompt = """
First, activate the 'workspace-tools' skill to ensure you have the correct tool mappings for this environment.

Using the technical-reviewer skill, read a document, verify its claims, and produce an annotated reviewed copy with section-by-section commentary and an overall assessment.

## Tool Configuration

**IMPORTANT**: Consult the workspace-tools skill for your organization's configured tools.
Use ONLY the tools listed in the Active Configuration section of workspace-tools.
If a capability is not configured, inform the user and continue with available capabilities.

## Input Parsing
The user invoked: /technical-review {{args}}

Examples:
- `/technical-review reports/proposal-20260205.md` - Review a specific document
- `/technical-review docs/architecture.md` - Review architecture documentation
- `/technical-review README.md` - Review the project README

If no document path is provided, inform the user that a document path is required:
"Usage: /technical-review <path-to-document>"
Do not proceed without a document path.

## Your Task

This is a **phased review** that produces an annotated copy of the original document with verified commentary. Do not skip phases or rush to judgment. The goal is to produce a thorough, evidence-backed review that helps the author strengthen their document.

---

### Phase 1: Full Document Read

Read the entire document to understand its structure, thesis, and intended audience. During this phase:

- Map the document's structure (sections, headings, flow)
- Identify the central thesis or purpose
- Catalog every verifiable claim: factual assertions, statistics, technical claims, historical references, dates, names, and numbers
- Note the intended audience and the level of rigor expected
- **Do not produce any output yet.** This phase is purely analytical.

---

### Phase 2: Research and Verification

Systematically verify the claims cataloged in Phase 1. Consult workspace-tools religiously and use every configured capability:

- **Web search** for external facts, statistics, and references
- **Internal search tools and knowledge bases** (if configured) for organizational context, policies, and internal references
- **Codebase exploration** for technical claims about code, architecture, or system behavior
- **Source control history** for historical claims about when changes were made, who made them, or why
- **Issue tracking** for referenced issues, bugs, or feature requests
- **Cross-reference between sections** for internal consistency

For each claim, record:
- Whether it is **verified** (with source), **incorrect** (with correction and source), or **unverifiable** (with honest explanation)
- Any additional context that strengthens or weakens the claim

Do not skip claims because they seem obviously true. Verify them anyway.

---

### Phase 3: Section-by-Section Review

Reproduce the original document text exactly, inserting reviewer commentary after each section or substantive paragraph. Use this format for commentary:

> **Reviewer's remarks:** [Your commentary here]

For each section, address as applicable:

- **Verified facts** — Confirm them and give credit. ("This is correct — confirmed via [source].")
- **Incorrect facts** — Provide the correction with a source. ("This is incorrect. The actual value is X — see [source].")
- **Unverifiable claims** — Be honest. ("I was unable to verify this claim. [Explanation of what was checked.]")
- **Strong arguments** — Acknowledge them. ("This is well-reasoned because [explanation].")
- **Weak arguments** — Explain the weakness. ("This argument assumes X, which is not established.")
- **Contradictions** — Flag inconsistencies between sections. ("This contradicts the claim in [section] that...")
- **Missing context** — Note important omissions. ("This section would benefit from mentioning...")

---

### Phase 4: Overall Assessment

After the section-by-section review, add a final section with:

```markdown
---

## Overall Assessment

### Summary
[2-3 paragraph summary of the document's strengths and weaknesses]

### Strengths
- [Specific strength with reference to section]
- [Specific strength with reference to section]

### Areas for Improvement
- [Specific area with actionable suggestion]
- [Specific area with actionable suggestion]

### Verification Summary
- **Claims verified**: N
- **Claims found incorrect**: N
- **Claims unverifiable**: N

### Recommendation
[One of: Ready as-is | Minor corrections needed | Needs revision | Significant rework required]

[Brief justification for the recommendation]
```

## Output Format

Create the reviewed document as a new file **adjacent to the original** with `-reviewed` appended to the basename:

- `reports/proposal-20260205.md` → `reports/proposal-20260205-reviewed.md`
- `docs/architecture.md` → `docs/architecture-reviewed.md`
- `README.md` → `README-reviewed.md`

The file must begin with a metadata header:

```markdown
# Technical Review: {Original Document Title or Filename}

**Reviewed**: {YYYY-MM-DD}
**Original**: {path to original document}
**Reviewer**: Technical Reviewer Agent

---
```

Followed by the interleaved original text and blockquote commentary from Phase 3, and the overall assessment from Phase 4.

**The original file must not be modified.**

## CRITICAL: Report Generation

**YOU MUST CREATE THE REVIEWED FILE.** This is not optional.

### Final Steps (MANDATORY)

1. **Complete ALL four phases** before writing the reviewed file
2. **Create the reviewed file** using the Write tool at the path described above
3. **Fill in ALL commentary** with real findings from your verification — no placeholder text
4. **Verify the original file is untouched** — do not modify it
5. **Confirm completion** by telling the user:
   - "Review saved to: [full path]"
   - Brief summary of key findings
   - The verification counts and recommendation

### Common Mistakes to Avoid

- DO NOT modify the original document
- DO NOT leave placeholder text in commentary
- DO NOT skip the verification phase — actually look things up
- DO NOT write vague commentary ("this seems wrong") — be specific
- DO NOT forget the overall assessment section

### Verification Checklist

Before responding to the user, verify:
- [ ] Reviewed file created with Write tool
- [ ] Original file is unchanged
- [ ] All sections have reviewer commentary
- [ ] Claims were actually verified (web search, codebase checks, etc.)
- [ ] Overall assessment section is present with verification counts
- [ ] File path follows the `-reviewed` naming convention
- [ ] Full path provided to user

**Remember**: The reviewed file is the primary deliverable. The chat summary is secondary.

## Important Guidelines

- **Verify before correcting** — Never assert something is wrong without checking. A reviewer who introduces errors is worse than no reviewer at all
- **Be specific** — "This number is wrong" is useless. "This claims 47% but the actual figure is 52% per [source]" is useful
- **Credit good work** — Do not only comment when something is wrong. Explicitly acknowledge well-researched, well-argued, and well-written sections
- **Proportional commentary** — Major errors deserve detailed corrections. Minor style issues deserve brief notes. Do not write a paragraph about a typo
- **Direct and professional tone** — Be frank without being hostile. The goal is to help the author, not to demonstrate superiority
- **Intellectual honesty** — If you cannot verify a claim, say so. If you are uncertain about a correction, express that uncertainty. Never present speculation as fact
- **Never hallucinate sources** — If you cannot find a source, do not invent one. Say what you checked and that you could not confirm the claim
"""
