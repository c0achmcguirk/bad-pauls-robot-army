description = "Analyze the blast radius of a potential change to understand dependencies and impact"
prompt = """
First, activate the 'pba-workspace-tools' skill to ensure you have the correct tool mappings for this environment.

Using the pba-mentor skill, investigate what would be affected by a proposed change, teaching impact analysis and systems thinking through comprehensive dependency mapping and risk assessment.

## Input Parsing
The user invoked: /pba-what-would-break {{args}}

Examples:
- `/pba-what-would-break if we change the User model schema` - Data model changes
- `/pba-what-would-break removing the cache layer` - Architectural changes
- `/pba-what-would-break changing this function signature` - API changes
- `/pba-what-would-break upgrading React to v19` - Dependency upgrades
- `/pba-what-would-break` - Interactive mode to discuss potential changes

## Your Task

This is an **educational investigation** designed to teach impact analysis, not to discourage changes. The goal is to help developers build mental models for reasoning about system dependencies, ripple effects, and change management.

### 1. Change Specification
Clarify what's being considered:
- What exactly would change? (Code, API, data structure, dependency)
- What's the motivation? (Bug fix, performance, refactor, feature)
- What's the scope? (Function, module, system-wide)

### 2. Dependency Analysis
Map the complete dependency graph:

**Direct Dependencies (First-Order Effects):**
- Code dependencies (imports, references)
- Data dependencies (readers, writers)
- API dependencies (consumers, clients)

**Indirect Dependencies (Second-Order Effects):**
- Cascading code changes
- Transitive system effects (monitoring, logging)

**Hidden Dependencies (Subtle Effects):**
- Timing dependencies
- State dependencies
- Environmental variations

### 3. Impact Assessment
For each affected area, analyze:
- Severity: Critical/High/Medium/Low
- Probability: Certain/Likely/Possible/Unlikely

### 4. Test Coverage Analysis
Map what tests protect against breakage:
- Unit tests, Integration tests, E2E tests
- Test gaps and risks

### 5. Change Mitigation Strategies
Teach safe change patterns:
- Incremental rollout (feature flags, canary)
- Backwards compatibility (deprecation, adapters)
- Validation strategies (monitoring, rollback plans)

## Output Format
Create a markdown file at `/reports/what-would-break-{change}-{timestamp}.md` with:

```markdown
# Blast Radius Analysis: [Change Description]

## The Proposed Change
**What**: [Specific change]
**Why**: [Motivation]
**Scope**: [How much would change]

## Executive Summary
[Overview of impact and risk level]
**Overall Risk Level**: High/Medium/Low
**Affected Systems**: [Count]
**Required Test Updates**: [Count]

## Dependency Map
### Direct Dependencies
[Things that immediately depend on what's changing]

### Indirect Dependencies
[Things that depend on the direct dependencies]

### Hidden Dependencies
[Non-obvious things that could break]

## Impact Assessment
### By Severity
- Critical Impacts
- Medium Impacts
- Low Impacts

### Test Coverage
- Well-covered areas
- Uncovered areas (gaps)

## Safe Change Strategies
### Recommended Approach
[Best way to make this change safely]

### Rollout Plan
[Step-by-step deployment strategy]

### Rollback Plan
[How to undo if needed]

## Action Items
### Before Implementation
- [Required preparation]

### During Implementation
- [Key steps]

### After Completion
- [Verification and cleanup]

## Learning Takeaways
[What this investigation teaches about systems thinking]
```

Remember: This analysis should **empower** developers to make changes confidently, not frighten them. Every change is manageable with proper planning.

## CRITICAL: Report Generation

**YOU MUST CREATE THE REPORT FILE.** This is not optional.

1. Create the report file using the Write tool
2. Fill in ALL sections with real findings
3. Provide the full path to the user when done
"""
